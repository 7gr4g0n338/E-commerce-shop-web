<!-- container: Class cá»§a Bootstrap Ä‘á»ƒ táº¡o khung chá»©a responsive cÃ³ Ä‘á»™ rá»™ng cá»‘ Ä‘á»‹nh -->

<div class="container">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-2">
        <a class="navbar-brand" href="/"><img src="{{ url_for('static', filename='images/logo/lotus.jpg') }}"
                alt="Tuan's Store Logo" height="50"> My Store</a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/about">Vá» chÃºng tÃ´i</a>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        ThÆ°Æ¡ng hiá»‡u
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        {% for brand in brands %}

                        <a class="dropdown-item" href="{{url_for('get_brand', id=brand.id)}}">{{brand.name}}</a>
                        {% endfor %}
                    </div>
                </li>

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Danh má»¥c sáº£n pháº©m
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        {% for c in categories %}
                        <a class="dropdown-item" href="{{url_for('get_category', id=c.id)}}">{{c.name}}</a>
                        {% endfor %}
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('get_cart') }}">
                        Quan tÃ¢m (
                        {% if current_user.is_authenticated %}
                        {% set cart_count = CustomerOrder.query.filter_by(customer_id=current_user.id,
                        status='in_cart').count() %}
                        {{ cart_count }}
                        {% else %}
                        {% if 'shopcart' in session %}
                        {{ session['shopcart']|length }}
                        {% else %}
                        0
                        {% endif %}
                        {% endif %}
                        )
                    </a>
                </li>
            </ul>

            <!-- ml-auto: margin-left: auto - Ä‘áº©y menu nÃ y sang pháº£i -->
            <ul class="navbar-nav ml-auto">

                <form action="{{ url_for('search') }}" method="GET" class="form-inline my-2 my-lg-0">
                    <div class="input-group">
                        <input class="form-control" type="search" name="q" placeholder="TÃ¬m kiáº¿m..."
                            class="form-control mr-sm-2 bg-white text-dark">
                        <div class="input-group-append">
                            <button class="btn btn-outline-light" type="submit">ğŸ”</button>
                        </div>
                    </div>
                </form>



                <!-- current_user: Object tá»« Flask-Login chá»©a thÃ´ng tin user hiá»‡n táº¡i
                     is_authenticated: Kiá»ƒm tra Ä‘Ã£ Ä‘Äƒng nháº­p chÆ°a -->
                {% if current_user.is_authenticated %}
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        {{ current_user.username }}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                        <a class="dropdown-item" href="{{ url_for('user_profile') }}">Cáº­p nháº­t thÃ´ng tin cÃ¡ nhÃ¢n</a>
                        {% if current_user.role == 'admin' %}
                        <a class="dropdown-item" href="{{ url_for('admin_logout') }}">ÄÄƒng xuáº¥t</a>
                        {% else %}
                        <a class="dropdown-item" href="{{ url_for('customerLogout') }}">ÄÄƒng xuáº¥t</a>
                        {% endif %}
                    </div>
                </li>

                {% else %}
                <li class="nav-item">
                    <a class='nav-link' href="{{url_for('customerLogin')}}">ÄÄƒng nháº­p</a>
                </li>
                <li class="nav-item">
                    <a class='nav-link' href="{{url_for('register_customer')}}">ÄÄƒng kÃ½</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>
    {% if not current_user.is_authenticated %}
    <div class="container">
        <div class="alert alert-info text-center" role="alert">
            Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ thÃªm sáº£n pháº©m quan tÃ¢m vÃ  Ä‘Æ°á»£c tÆ° váº¥n! (Náº¿u quÃ½ khÃ¡ch chÆ°a cÃ³ tÃ i khoáº£n, vui lÃ²ng Ä‘Äƒng
            kÃ½ vÃ  Ä‘Äƒng nháº­p)
        </div>
    </div>
    {% endif %}
    {% include '_messages.html' %}
</div>

<style>
    .navbar {
        min-height: 50px;
    }

    .navbar-brand {
        padding: 0 15px;
        height: 50px;
        line-height: 50px;
    }
</style>